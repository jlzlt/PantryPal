{% extends "recipes/layout.html" %} {% load static %} {% block title %}Saved
Recipes{% endblock %} {% block body %} {% if saved_recipes %}
<div id="saved-recipe-results">
  <div class="row gy-4 m-3">
    {% for recipe in saved_recipes %}
    <div class="col-12">
      <div class="card h-100 shadow-sm d-flex flex-row overflow-hidden">
        {% if recipe.image %}
        <div class="flex-shrink-0" style="width: 400px">
          <img
            src="{{ recipe.image.url }}"
            alt="{{ recipe.title }}"
            class="w-100 h-100 object-fit-cover rounded-start"
          />
        </div>
        {% else %}
        <div
          class="d-flex align-items-center justify-content-center bg-light text-muted"
          style="width: 400px; height: 100%"
        >
          <span>No Image</span>
        </div>
        {% endif %}

        <div class="card-body d-flex flex-column flex-grow-1">
          <h5 class="card-title">{{ recipe.title }}</h5>
          <hr />
          <div class="d-flex gap-4 flex-wrap mb-3">
            <div class="flex-fill" style="min-width: 200px">
              <strong>Ingredients:</strong>
              <ul class="mb-2">
                {% for ingredient in recipe.ingredients %}
                <li>{{ ingredient }}</li>
                {% endfor %}
              </ul>
            </div>

            <div class="flex-fill" style="min-width: 200px">
              <strong>Instructions:</strong>
              <ol class="mb-0">
                {% for step in recipe.instructions %}
                <li>{{ step }}</li>
                {% endfor %}
              </ol>
            </div>
          </div>
          {% if user.is_authenticated %}
          <form
            method="POST"
            action="{% url 'save_recipe' %}"
            enctype="multipart/form-data"
            class="mt-auto save-recipe-form"
          >
            {% csrf_token %}
            <input type="hidden" name="hash" value="{{ recipe.hash }}" />
            <input type="hidden" name="title" value="{{ recipe.title }}" />
            <input
              type="hidden"
              name="ingredients"
              value="{{ recipe.ingredients }}"
            />
            <input
              type="hidden"
              name="instructions"
              value="{{ recipe.instructions }}"
            />
            <input type="hidden" name="tags" value="{{ recipe.filters }}" />
            <input type="hidden" name="image_url" value="{{ recipe.image }}" />
            <button
              type="submit"
              class="btn btn-outline-success btn-sm w-100"
              data-saved="true"
              style="font-weight: 500"
            >
              Remove from Saved
            </button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>

    {% endfor %}
  </div>
</div>
{% else %}
<div class="text-center py-5">
  <h4 class="mb-3">You have not saved recipes yet.</h4>
</div>
{% endif %} {% endblock %} {% block script %}
<script type="module" src="{% static 'recipes/saved.js' %}"></script>
{% endblock %}
